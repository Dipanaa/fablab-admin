<div class="border-fablab-border flex flex-col gap-3">
  <div
    class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
  >
    <h2 class="text-3xl font-bold text-fablab-text-primary">
      Administración de Solicitudes
    </h2>
    <div
      class="flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto"
    >
      <searcher></searcher>
    </div>
  </div>

  <div
    class="h-auto w-full overflow-auto rounded-lg border border-fablab-border bg-fablab-card-bg"
  >
    <table class="min-w-full text-sm text-left text-fablab-text-secondary">
      <thead
        class="text-xs uppercase bg-fablab-text-secondary text-fablab-bg sticky top-0"
      >
        <tr>
          <th scope="col" class="px-4 py-3 font-bold">RUT</th>
          <th scope="col" class="px-4 py-3 font-bold">Nombre</th>
          <th scope="col" class="px-4 py-3 font-bold">Email</th>
          <th scope="col" class="px-4 py-3 font-bold">Tipo</th>
          <th scope="col" class="px-4 py-3 font-bold">Fecha</th>
          <th scope="col" class="px-4 py-3 font-bold">Estado</th>
          <th scope="col" class="px-4 py-3 font-bold">Solicitud</th>
        </tr>
      </thead>

      <tbody class="divide-y divide-fablab-border">
        <tr
          *ngFor="let solicitud of notificationsService.notificationsData()"
          class="bg-fablab-card-bg hover:bg-fablab-border transition"
        >
          <td class="px-4 py-4 text-fablab-text-secondary">
            {{ solicitud.rut }}
          </td>
          <td class="px-4 py-4 text-fablab-text-secondary">
            {{ solicitud.nombre }}
          </td>
          <td class="px-4 py-4 text-fablab-text-secondary">
            {{ solicitud.email }}
          </td>
          <td class="px-4 py-4 text-fablab-text-secondary">
            {{ solicitud.tipo }}
          </td>
          <td class="px-4 py-4 text-fablab-text-secondary">
            {{ solicitud.fecha | date : "dd/MM/yyyy" }}
          </td>

          <td class="px-4 py-4">
            <span
              [ngClass]="{
                'text-fablab-primary font-medium':
                  solicitud.estado === 'Pendiente',
                'text-green-500 font-semibold': solicitud.estado === 'Aceptada',
                'text-red-500 font-bold': solicitud.estado === 'Rechazada'
              }"
            >
              {{ solicitud.estado }}
            </span>
          </td>

          <td class="px-4 py-4 text-fablab-text-secondary space-x-4">
            <button
              (click)="acceptNotification(solicitud.id)"
              class="bg-fablab-accent text-black px-3 py-1 rounded hover:bg-fablab-accent-dark cursor-pointer"
            >
              Aceptar
            </button>
            <button
              class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 cursor-pointer"
            >
              Rechazar
            </button>
          </td>
        </tr>

        <tr *ngIf="notificationsService.notificationsData().length === 0">
          <td
            colspan="8"
            class="text-center py-6 text-fablab-text-secondary bg-fablab-card-bg rounded-b-lg"
          >
            No se encontraron solicitudes que coincidan con la búsqueda.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
