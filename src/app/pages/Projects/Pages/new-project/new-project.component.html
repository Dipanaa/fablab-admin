
<div class="flex justify-end pb-8 pr-8">
  <back-button></back-button>
</div>

<section
  class="p-8 max-w-4xl mx-auto bg-fablab-bg-card rounded-2xl shadow-lg transition-all border border-fablab-border"
>
  <h2 class="text-3xl font-bold text-fablab-text-primary mb-8 text-center">
    Creación de Proyecto
  </h2>

  <form
    autocomplete="off"
    [formGroup]="newProjectForm"
    (ngSubmit)="submitNewProject()"
    class="space-y-6"
  >
    <div>
      <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
        Título del proyecto
      </label>
      <input
        type="text"
        name="titulo"
        required
        formControlName="titulo"
        class="w-full px-4 py-2.5 border border-fablab-border rounded-lg focus:ring-2 focus:ring-fablab-primary focus:border-transparent bg-fablab-bg transition text-fablab-text-primary"
        placeholder="Ej. Plataforma para domótica"
      />
      <div class="my-2">
        @if(CustomFormsValidations.ValidateErrors("titulo",newProjectForm)){
          <span class="text-red-500">
            {{CustomFormsValidations.ValidateErrors("titulo", newProjectForm)}}
          </span>
        }
      </div>
    </div>

    <div>
      <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
        Descripción breve
      </label>
      <textarea
        name="descripcion"
        rows="6"
        required
        formControlName="descripcionproyecto"
        class="w-full px-4 py-2.5 border border-fablab-border rounded-lg focus:ring-2 focus:ring-fablab-primary focus:border-transparent bg-fablab-bg transition resize-none text-fablab-text-primary"
        placeholder="Describe brevemente en qué consiste tu proyecto..."
      ></textarea>
      <div class="my-2">
        @if(CustomFormsValidations.ValidateErrors("descripcionproyecto",newProjectForm,"proyecto")){
          <span class="text-red-500">
            {{CustomFormsValidations.ValidateErrors("descripcionproyecto", newProjectForm,"proyecto")}}
          </span>
        }
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
          Categoría
        </label>
        <select
          name="categoria"
          required
          formControlName="categoria"
          class="w-full px-4 py-2.5 border border-fablab-border rounded-lg focus:ring-2 focus:ring-fablab-primary focus:border-transparent bg-fablab-bg transition text-fablab-text-primary"
        >
          <option value="" disabled selected>Selecciona una categoría</option>
          <option class="bg-fablab-bg-card">Impresión 3D</option>
          <option class="bg-fablab-bg-card">Corte Láser</option>
          <option class="bg-fablab-bg-card">Electrónica</option>
          <option class="bg-fablab-bg-card">Mixto</option>
          <option class="bg-fablab-bg-card">Otro</option>
        </select>
        <div class="my-2">
        @if(CustomFormsValidations.ValidateErrors("categoria",newProjectForm)){
          <span class="text-red-500">
            {{CustomFormsValidations.ValidateErrors("categoria", newProjectForm)}}
          </span>
        }
      </div>
      </div>

      <div>
        <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
          Área de aplicación
        </label>
        <input
          type="text"
          name="areaaplicacion"
          required
          formControlName="areaaplicacion"
          class="w-full px-4 py-2.5 border border-fablab-border rounded-lg focus:ring-2 focus:ring-fablab-primary focus:border-transparent bg-fablab-bg transition text-fablab-text-primary"
          placeholder="Ej. Educación, diseño, ingeniería..."
        />
        @if(CustomFormsValidations.ValidateErrors("areaaplicacion",newProjectForm,"area de aplicación")){
          <span class="text-red-500">
            {{CustomFormsValidations.ValidateErrors("areaaplicacion", newProjectForm,"area de aplicación")}}
          </span>
        }
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
          Link de referencia (opcional)
        </label>
        <input
          type="url"
          name="referencia"
          placeholder="https://..."
          class="w-full px-4 py-2.5 border border-fablab-border rounded-lg focus:ring-2 focus:ring-fablab-primary focus:border-transparent bg-fablab-bg transition text-fablab-text-primary"
        />
      </div>

      <div>
        <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
          Fecha estimada de inicio
        </label>
        <input
          type="date"
          name="fechainicio"
          required
          formControlName="fechainicio"
          class="w-full px-4 py-2.5 border border-fablab-border rounded-lg focus:ring-2 focus:ring-fablab-primary focus:border-transparent bg-fablab-bg transition text-fablab-text-primary"
        />
      </div>
    </div>

    <div>
      <label class="block mb-2 text-sm font-semibold text-fablab-text-light">
        Agregar imagen de proyecto
      </label>
      <input
        type="file"
        (change)="imageFileSelected($event)"
        class="w-full text-sm text-fablab-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-fablab-card-bg file:text-black hover:file:bg-fablab-accent-dark cursor-pointer"
      />
    </div>
    <div class="flex justify-end pt-6">
      @if(!proyectsService.postProjectLoader()){

        <button
          type="submit"
          class="bg-fablab-accent hover:bg-fablab-accent-dark text-black px-6 py-2.5 rounded-lg font-medium transition shadow-sm hover:shadow-md focus:ring-2 focus:ring-fablab-primary"
        >
          Crear proyecto
        </button>
      }
      @if(proyectsService.postProjectLoader()){
        <button
          type="submit"
          class="w-20 px-6 py-2.5 bg-gray-400 text-white font-semibold rounded-md transition cursor-pointer flex justify-center items-center"
          [disabled]=""
        >

        <img src="../../../assets/icons/Rolling@1x-1.0s-200px-200px (1).svg" alt="" class="h-7 w-7">
        </button>
      }
    </div>

  </form>
</section>
