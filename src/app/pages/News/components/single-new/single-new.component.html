<div class="flex justify-end pr-8">
  <back-button></back-button>
</div>

<div class="p-6 space-y-6">
  <div
    class="bg-fablab-card-bg p-6 rounded-2xl shadow-lg border border-fablab-border"
  >
    <div class="w-full flex justify-between flex-wrap items-center">
      <h1 class="text-3xl font-bold text-fablab-text-primary">
        {{ editMode() ? "Edición de noticia" : "Previsualización de noticia" }}
      </h1>

      <div class="flex justify-end gap-3 mb-0">
        <button
          class="px-4 py-2 text-sm font-medium rounded-lg text-black bg-fablab-accent hover:bg-fablab-accent-dark transition"
          (click)="formMode()"
        >
          {{ editMode() ? "Previsualizar noticia" : "Editar noticia" }}
        </button>
        <button
          class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 transition"
          (click)="openModal()"
        >
          Eliminar noticia
        </button>
      </div>
    </div>
  </div>

  <modal-component
    [show]="isModalOpen"
    [title]="singleNewsData()?.titulo!"
    [description]="'¿Desea eliminar esta noticia?'"
    (accept)="deleteNewByRoute()"
    (decline)="closeModal()"
    (close)="closeModal()"
    [loading]="loading()"
  />

  @if(resourceNews.isLoading()){
  <h1 class="text-fablab-primary text-xl text-center py-12">Cargando...</h1>
  } @if(resourceNews.hasValue()){ @if(editMode()) {
  <updatenew [idUpdate]="idNew()"></updatenew>
  } @else {
  <div class="w-full">
    <div
      class="bg-fablab-bg p-8 w-full max-w-6xl mx-auto rounded-2xl shadow-lg border border-fablab-border space-y-6 text-fablab-text-primary"
    >
      <p
        class="text-sm font-medium uppercase tracking-wider text-fablab-primary mb-2"
      >
        {{ singleNewsData()?.epigrafe }}
      </p>
      <p class="text-sm text-fablab-text-secondary">
        {{ singleNewsData()?.fechaPublicacion | date }}
      </p>

      <h1
        class="font-bold text-4xl text-fablab-text-primary text-justify mx-auto"
      >
        {{ singleNewsData()?.titulo }}
      </h1>

      <div
        class="mt-5 pt-4 border-t border-fablab-border flex items-center gap-4"
      >
        <div class="p-3 bg-fablab-primary/30 text-fablab-primary rounded-full">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 18.75a7.5 7.5 0 0 1 14.998 0H4.501Z"
            />
          </svg>
        </div>

        <div class="ml-1">
          <p class="text-lg text-fablab-text-primary font-semibold">
            Autor: {{ singleNewsData()?.autor }}
          </p>
          <p class="font-medium text-fablab-text-secondary text-sm">
            Miembro de laboratorio FabLab
          </p>
        </div>
      </div>

      <div class="pt-4 border-t border-fablab-border">
        <p
          class="text-base text-fablab-text-secondary leading-relaxed whitespace-pre-line"
        >
          {{ singleNewsData()?.contenido }}
        </p>
      </div>
    </div>
  </div>
  } }
</div>
