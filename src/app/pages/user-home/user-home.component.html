@if(notificacionsStatusService.statusMessage()){
<status-message></status-message>
}

<div class="space-y-8">
  <div
    class="bg-fablab-accent-dark text-fablab-text-primary rounded-2xl shadow-lg p-6"
  >
    <h1 class="text-2xl font-bold flex items-center gap-2">
      Bienvenido, {{ authService.userData()?.nombre || "Usuario" }}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="size-6 text-fablab-text-primary"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"
        />
      </svg>
    </h1>
    <p class="text-sm text-fablab-text-primary">
      Aquí encontrarás lo más reciente del FabLab.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 space-y-6">
      <section>
        <h2
          class="text-xl font-semibold text-fablab-text-primary mb-3 flex items-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6 text-fablab-text-primary"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"
            />
          </svg>
          Noticias recientes
        </h2>
        <div class="space-y-3">
          @for (new of newsService.newsResponse() | slice:0:2; track new.id) {

          <a
            [routerLink]="['/noticias', new.id]"
            class="block bg-fablab-card-bg p-4 rounded-xl shadow hover:bg-fablab-border transition cursor-pointer"
          >
            <h3
              class="text-lg font-bold text-fablab-primary overflow-hidden text-ellipsis whitespace-nowrap"
            >
              {{ new.titulo }}
            </h3>

            <p class="text-sm text-fablab-text-secondary">
              {{ new.fechaPublicacion | date : "short" }}
            </p>

            <div
              class="text-fablab-text-secondary mt-2 h-10 overflow-hidden text-ellipsis whitespace-nowrap"
            >
              {{ new.contenido }}
            </div>
          </a>
          } @empty {
          <div
            class="bg-fablab-card-bg p-4 rounded-xl text-fablab-text-secondary text-center"
          >
            No hay noticias recientes para mostrar.
          </div>
          }
        </div>
      </section>

      <section>
        <h2
          class="text-xl font-semibold text-fablab-text-primary mb-3 flex items-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6 text-fablab-text-primary"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"
            />
          </svg>
          Proyectos destacados
        </h2>
        <div class="grid sm:grid-cols-2 gap-4">
          <div
            *ngFor="let proyecto of proyectosDestacados"
            class="bg-fablab-card-bg rounded-xl shadow overflow-hidden hover:shadow-lg transition border border-fablab-border"
          >
            <img [src]="proyecto.img" class="w-full h-40 object-cover" />
            <div class="p-4">
              <h3 class="text-lg font-bold text-fablab-primary">
                {{ proyecto.titulo }}
              </h3>
              <p class="text-fablab-text-secondary">{{ proyecto.autor }}</p>
              <p class="text-sm text-fablab-text-secondary">
                {{ proyecto.categoria }}
              </p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="space-y-6">
      <section>
        <h2
          class="text-xl font-semibold text-fablab-text-primary mb-3 flex items-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6 text-fablab-text-primary"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"
            />
          </svg>
          Mis proyectos
        </h2>
        <div class="space-y-3">
          @for (proyecto of projectsService.projectsData()| slice:0:3; track
          $index) {
          <div
            class="bg-fablab-card-bg p-4 rounded-xl shadow hover:shadow-lg transition border border-fablab-border"
          >
            <h3 class="text-lg font-bold text-fablab-primary">
              {{ proyecto.titulo }}
            </h3>
            <p class="text-fablab-text-secondary text-sm">
              {{ proyecto.descripcionproyecto }}
            </p>
          </div>

          } @empty {
          <div
            class="bg-fablab-card-bg p-4 rounded-xl text-fablab-text-secondary text-center border border-fablab-border"
          >
            ¡Aún no tienes proyectos a tu nombre! <br />
            <span
              class="text-fablab-primary font-semibold cursor-pointer"
              routerLink="/proyectos/nuevo"
              >Crea un nuevo proyecto</span
            >
            en la sección de Proyectos para empezar.
          </div>
          }
        </div>
      </section>
    </div>
  </div>
  <app-footer pageName="Panel de usuario"></app-footer>
</div>
